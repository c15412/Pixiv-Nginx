#   huggingface Start
upstream huggingface-co {
    hash $connection consistent;
    #server [2600:9000:2014:7600:17:b174:6d00:93a1]:443;
    #server [2600:9000:2014:ac00:17:b174:6d00:93a1]:443;
    #server [2600:9000:2014:a600:17:b174:6d00:93a1]:443;
    #server [2600:9000:2014:b600:17:b174:6d00:93a1]:443;
    #server [2600:9000:2014:c600:17:b174:6d00:93a1]:443;
    #server [2600:9000:2014:bc00:17:b174:6d00:93a1]:443;
    #server [2600:9000:2014:da00:17:b174:6d00:93a1]:443;
    server [2600:9000:2014:a400:17:b174:6d00:93a1]:443 max_fails=0;
    server [2600:9000:2939:7600:17:b174:6d00:93a1]:443 max_fails=0;
    server [2600:9000:2804:ce00:1c:55ad:4180:93a1]:443 max_fails=0;
    #server [2600:9000:2939:ac00:17:b174:6d00:93a1]:443;
    #server [2600:9000:2939:a600:17:b174:6d00:93a1]:443;
    #server [2600:9000:2939:b600:17:b174:6d00:93a1]:443;
    #server [2600:9000:2939:c600:17:b174:6d00:93a1]:443;
    #server [2600:9000:2939:bc00:17:b174:6d00:93a1]:443;
    #server [2600:9000:2939:da00:17:b174:6d00:93a1]:443;
    #server [2600:9000:2939:a400:17:b174:6d00:93a1]:443;
    server 54.230.71.56:443 max_fails=0;
    server 54.230.71.2:443 max_fails=0;
    server 54.230.71.103:443 max_fails=0;
    server 54.230.71.28:443 max_fails=0;
    server 3.175.207.30:443 max_fails=0;
    server 3.175.207.31:443 max_fails=0;
    server 3.175.207.32:443 max_fails=0;
    server 3.175.207.33:443 max_fails=0;
    keepalive 32;
    keepalive_timeout 1h;
    keepalive_requests 100000;
}

map_hash_bucket_size 64;
map_hash_max_size 2048;
map $http_host $huggingface_sni {
    hostnames;
    "1.huggingface.co"		"d3q5pwvs88w1av.cloudfront.net";
    "1cdn-uploads.huggingface.co"	"d1cylya5vv74ss.cloudfront.net";
    "cdn-lfs-eu-1.huggingface.co"	"d1wmdo6fswuln8.cloudfront.net";
    "cdn-lfs-us-1.huggingface.co"	"d3tt2suyqs9zqv.cloudfront.net";
    "cdn-lfs.huggingface.co"	"d2243ylfu57tc6.cloudfront.net";
    "cdn-datasets.huggingface.co"	"d36easquyfvmrn.cloudfront.net";
    "cdn.huggingface.co"	"d2ws9o8vfrpkyk.cloudfront.net";
    "neuralconvo.huggingface.co"	"d3bh913krp35a5.cloudfront.net";
    "*.huggingface.co"		"d1cnjqbqjby1vq.cloudfront.net";
    "huggingface.co"		"d1cnjqbqjby1vq.cloudfront.net";
    default               "";
}
#cdn-avatars		d3q5pwvs88w1av.cloudfront.net
#cdn-media		d3o8kve1y18aln.cloudfront.net		v6suffix[19:6fb8:2ac0:93a1]
#cdn-uploads		d1cylya5vv74ss.cloudfront.net		v6suffix[1c:be4f:c300:93a1]
#convai			d1cnjqbqjby1vq.cloudfront.net
#neuralconvo		d3bh913krp35a5.cloudfront.net
#cdn-datasets		d36easquyfvmrn.cloudfront.net
#cdn			d2ws9o8vfrpkyk.cloudfront.net
#cdn-lfs			d2243ylfu57tc6.cloudfront.net
#cdn-lfs-eu-1		d1wmdo6fswuln8.cloudfront.net
#cdn-lfs-us-1		d3tt2suyqs9zqv.cloudfront.net

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name status.huggingface.co;

    include cert.conf;
    access_log off;
    error_log logs/huggingface-error.log;

    client_max_body_size 50M;

    location / {
        resolver 119.29.29.29:53 valid=1h ipv4=on ipv6=on;
        proxy_pass https://statuspage.betteruptime.com;
        include shared-proxy-params-empty-sni.conf;
    }
}
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name discuss.huggingface.co;

    include cert.conf;
    access_log off;
    error_log logs/huggingface-error.log;

    client_max_body_size 50M;

    location / {
        resolver 119.29.29.29:53 valid=1h ipv4=on ipv6=on;
        proxy_pass https://hellohellohello.hosted-by-discourse.com;
        include shared-proxy-params-empty-sni.conf;
    }
}
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name ui.endpoints.huggingface.co;
    server_name store.huggingface.co;
    server_name dell.huggingface.co;

    include cert.conf;
    access_log off;
    error_log logs/huggingface-error.log;

    client_max_body_size 50M;

    location / {
        resolver 119.29.29.29:53 valid=1h ipv4=on ipv6=on;
        proxy_pass https://cname.vercel-dns.com;
        include shared-proxy-params-empty-sni.conf;
    }
}
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name home.huggingface.co;

    include cert.conf;
    access_log off;
    error_log logs/huggingface-error.log;

    client_max_body_size 50M;

    location / {
        resolver 119.29.29.29:53 valid=1h ipv4=on ipv6=on;
        proxy_pass https://hugging-face.customdomains.okta.com;
        include shared-proxy-params-empty-sni.conf;
    }
}
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name api-inference.huggingface.co;

    include cert.conf;
    access_log off;
    error_log NUL;

    rewrite ^(.*) https://huggingface.co/docs/api-inference/index permanent;
}
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name ui.autotrain.huggingface.co;

    include cert.conf;
    access_log off;
    error_log NUL;

    rewrite ^(.*) https://huggingface.co/autotrain permanent;
}
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name thumbnails.huggingface.co;

    include cert.conf;
    access_log off;
    error_log NUL;

    rewrite ^(.*) https://cdn-thumbnails.huggingface.co$1 permanent;
}
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name huggingface.co;
    server_name *.huggingface.co;

    include cert.conf;
    access_log logs/huggingface-access.log main  buffer=512;
    error_log NUL;

    client_max_body_size 50M;

    location / {
        proxy_pass https://huggingface-co;
        #proxy_pass https://CloudFront;
        proxy_next_upstream error timeout http_403 http_429 http_500 http_502 http_503 http_504 non_idempotent;
        proxy_buffer_size  64k;
        proxy_buffers   32 64k;
        proxy_busy_buffers_size 128k;
        include shared-proxy-params-1.conf;
        proxy_ssl_session_reuse off;
        proxy_ssl_name $huggingface_sni;
    }
}
#   huggingface End